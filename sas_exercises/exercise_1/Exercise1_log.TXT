NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

31   
32   /* create user-defined formats and store them in the work folder */
33   
34   proc format;
35     value agecat
36          low-64 = '0-64'
37          65-high = '65+';
NOTE: Format AGECAT has been output.
38   
39      value totexp20_cate
40         0         = 'no expense'
41         other     = 'any expense';
NOTE: Format TOTEXP20_CATE has been output.
42   run;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

43   
44   %let datafolder = c:\meps_data;  /* create a macro variable. adjust the folder name, if needed */
45   libname cdata "&datafolder";
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: c:\meps_data
45 !                               /* define a sas library and assign a libref to it */
46   
47   /* read in the sas data set from the 2020 meps full-year consolidated file (hc-224) */
48   data work.puf224;
49     set cdata.h224 (keep = totexp20 agelast   varstr  varpsu  perwt20f panel);
50   
51     /* create another version of the totexp20 variable for a domain variable */
52        with_an_expense= totexp20;
53   
54     /* create a character variable based on a numeric variable using a table lookup */
55        char_with_an_expense = put(totexp20,totexp20_cate.);
56   
57     run;

NOTE: There were 27805 observations read from the data set CDATA.H224.
NOTE: The data set WORK.PUF224 has 27805 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.33 seconds
      cpu time            0.11 seconds
      

58   
59   title 'meps full-year consolidated file, 2020';
60   ods html close; /* this will make the default html output no longer active,
61                     and the output will not be displayed in the results viewer.*/
62   
63   ods graphics off; /*suppress the graphics */
64   ods listing; /* open the listing destination*/
65   title2 'proportion of persons with an expense (2-category numeric variable/class statement required), 2020 _method 1';
66   proc surveymeans data=work.puf224 nobs mean stderr sum ;
67       var  with_an_expense  ;
68       stratum varstr;
69       cluster varpsu;
70       weight perwt20f;
71       class with_an_expense;
72       format with_an_expense totexp20_cate. ;
73   run;

NOTE: Due to nonpositive weights, 958 observation(s) were deleted.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

74   
75   title2 'proportion of persons with an expense (2-category character variable), 2020 - method 2';
76   proc surveymeans data=work.puf224 nobs mean stderr sum ;
77       var  char_with_an_expense  ;
78       stratum varstr;
79       cluster varpsu;
80       weight perwt20f;
81   run;

NOTE: Due to nonpositive weights, 958 observation(s) were deleted.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

82   
83   title2 'percentage of persons with an expense, 2020 - method 3';
84   proc surveyfreq data=work.puf224 ;
85       tables  char_with_an_expense ;
86       stratum varstr;
87       cluster varpsu;
88       weight perwt20f;
89   run;

NOTE: 958 observations were omitted due to nonpositive weights.
NOTE: PROCEDURE SURVEYFREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

90   
91   title2 'mean and median expense per person with an expense, oveall and for ages 0-64, and 65+, 2020';
92   proc surveymeans data= work.puf224 nobs mean stderr sum median  ;
93       var  totexp20;
94       stratum varstr ;
95       cluster varpsu ;
96       weight  perwt20f ;
97       domain with_an_expense('any expense') with_an_expense('any expense')*agelast;
98       format with_an_expense totexp20_cate. agelast agecat.;
99   run;

NOTE: Due to nonpositive weights, 958 observation(s) were deleted.
NOTE: Only one cluster in a stratum for with_an_expense*PERSON'S AGE LAST TIME ELIGIBLE domains for variable(s) TOTEXP20. The 
      estimate of variance for TOTEXP20 will omit this stratum.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.19 seconds
      cpu time            0.17 seconds
      

100  title;  /* cancel the TITLE and TITLE2 statements */
101  /* uncomment the next 2 lines of code to close the proc printto, only if used earlier */
102  
103  proc printto;
104  run;

