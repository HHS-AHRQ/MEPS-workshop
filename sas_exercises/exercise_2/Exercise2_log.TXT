NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

841  
842  
843  /* Create use-defined formats and store them in a catalog called FORMATS
844     in the work folder. They will be deleted at the end of tjr SAS session.
845  */
846  
847  PROC FORMAT;
848     VALUE SUBPOP
849            1 = 'OnePlusNacroticEtc'
850            2 = 'OTHERS';
NOTE: Format SUBPOP has been output.
851  RUN;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

852  
853  /* KEEP THE SPECIFIED VARIABLES WHEN READING THE INPUT DATA SET AND
854     RESTRICT TO OBSERVATIONS HAVING THERAPEUTIC CLASSIFICATION (TC) CODES
855     FOR NARCOTIC ANALGESICS OR NARCOTIC ANALGESIC COMBOS
856  */
857  
858  %LET DataFolder = C:\MEPS_Data;  /* Adjust the folder name, if needed */
859  libname CDATA "&DataFolder";
NOTE: Libref CDATA refers to the same physical library as NEW.
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\MEPS_Data
860  
861  DATA WORK.DRUG;
862    SET CDATA.H213A (KEEP=DUPERSID RXRECIDX LINKIDX TC1S1_1 RXXP19X RXSF19X
863                     WHERE=(TC1S1_1 IN (60, 191)));
864  RUN;

NOTE: There were 9807 observations read from the data set CDATA.H213A.
      WHERE TC1S1_1 in (60, 191);
NOTE: The data set WORK.DRUG has 9807 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

865  
866  ODS HTML CLOSE; /* This will make the default HTML output no longer active,
867                    and the output will not be displayed in the Results Viewer.*/
868  TITLE "A SAMPLE DUMP FOR PMED RECORDS WITH Narcotic analgesics or Narcotic analgesic combos, 2019";
869  PROC PRINT DATA=WORK.DRUG (OBS=12) noobs;
870     VAR dupersid RXRECIDX LINKIDX TC1S1_1 RXXP19X RXSF19X;
871  RUN;

NOTE: There were 12 observations read from the data set WORK.DRUG.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

872  
873  
874  /* SUM "RXXP19X and RXSF19X" DATA TO PERSON-LEVEL*/
875  
876  PROC SUMMARY DATA=WORK.DRUG NWAY;
877    CLASS DUPERSID;
878    VAR RXXP19X RXSF19X;
879    OUTPUT OUT=WORK.PERDRUG (DROP = _TYPE_ RENAME=(_FREQ_ = N_PHRCHASE))
880                    /*# OF PURCHASES PER PERSON */
881               sum=TOT_EXP OOP_EXP;
882  RUN;

NOTE: There were 9807 observations read from the data set WORK.DRUG.
NOTE: The data set WORK.PERDRUG has 2334 observations and 4 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

883  
884  TITLE "A SAMPLE DUMP FOR PERSON-LEVEL EXPENDITURES FOR NARCOTIC ANALGESICS OR NARCOTIC ANALGESIC COMBOS";
885  PROC PRINT DATA=PERDRUG (OBS=3);
886  SUM N_PHRCHASE;
887  RUN;

NOTE: There were 3 observations read from the data set WORK.PERDRUG.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

888  
889  DATA WORK.PERDRUG;
890   SET PERDRUG;
891   /* CREATE A NEW VARIABLE FOR EXPENSES EXCLUDING OUT-OF-POCKET EXPENSES */
892   THIRD_PAYER   = TOT_EXP- OOP_EXP;
893   RUN;

NOTE: There were 2334 observations read from the data set WORK.PERDRUG.
NOTE: The data set WORK.PERDRUG has 2334 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

894  PROC SORT DATA=WORK.PERDRUG; BY DUPERSID; RUN;

NOTE: There were 2334 observations read from the data set WORK.PERDRUG.
NOTE: The data set WORK.PERDRUG has 2334 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

895  
896  /*SORT THE FULL-YEAR(FY) CONSOLIDATED FILE*/
897  PROC SORT DATA=CDATA.H216 (KEEP=DUPERSID VARSTR VARPSU PERWT19F) OUT=WORK.H216;
898  BY DUPERSID; RUN;

NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 28512 observations read from the data set CDATA.H216.
NOTE: The data set WORK.H216 has 28512 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

899  
900  /*MERGE THE PERSON-LEVEL EXPENDITURES TO THE FY PUF*/
901  DATA  WORK.PersonRxLinked;
902  MERGE WORK.H216 (IN=Person)
903        WORK.PERDRUG  (IN=RX KEEP=DUPERSID N_PHRCHASE TOT_EXP OOP_EXP THIRD_PAYER);
904     BY DUPERSID;
905     IF Person and RX THEN SUBPOP = 1; /*PERSONS WITH 1+ Narcotic analgesics or Narcotic analgesic combos */
906  
907     ELSE IF Person NE RX THEN DO;
908           SUBPOP         = 2 ;  /*PERSONS WITHOUT ANY PURCHASE OF Narcotic analgesics or Narcotic analgesic combos*/
909           N_PHRCHASE  = 0 ;  /*# OF PURCHASES PER PERSON */
910           THIRD_PAYER = 0 ;
911           TOT_EXP = 0 ;
912           OOP_EXP = 0 ;
913      END;
914      IF PERSON;
915      LABEL   TOT_EXP= 'TOTAL EXPENSES FOR NACROTIC ETC'
916              OOP_Exp = 'OUT-OF-POCKET EXPENSES'
917              THIRD_PAYER = 'TOTAL EXPENSES MINUS OUT-OF-POCKET EXPENSES'
918              N_PHRCHASE  = '# OF PURCHASES PER PERSON';
919  RUN;

NOTE: There were 28512 observations read from the data set WORK.H216.
NOTE: There were 2334 observations read from the data set WORK.PERDRUG.
NOTE: The data set WORK.PERSONRXLINKED has 28512 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

920  TITLE;
921  
922  /* CALCULATE ESTIMATES ON USE AND EXPENDITURES*/
923  ods graphics off; /*Suppress the graphics */
924  ods listing; /* Open the listing destination*/
925  ods exclude Statistics /* Not to generate output for the overall population */
926  TITLE "PERSON-LEVEL ESTIMATES ON EXPENDITURES AND USE FOR NARCOTIC ANALGESICS or NARCOTIC COMBOS, 2168";
927  /* When you request SUM in PROC SURVEYMEANS, the procedure computes STD by default.*/
928  PROC SURVEYMEANS DATA=WORK.PersonRxLinked NOBS SUMWGT MEAN STDERR SUM;
929    VAR  N_PHRCHASE TOT_EXP OOP_EXP THIRD_PAYER ;
930    STRATA  VARSTR ;
931    CLUSTER VARPSU;
932    WEIGHT  PERWT19f;
933    DOMAIN  SUBPOP("OnePlusNacroticEtc");
934    FORMAT SUBPOP SUBPOP.;
935   RUN;

NOTE: Due to nonpositive weights, 864 observation(s) were deleted.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
      

936  title;
937  /* THE PROC PRINTTO null step is required to close the PROC PRINTTO,
938   only if used earlier., Otherswise. please comment out the next two lines  */
939  
940  PROC PRINTTO;
941  RUN;

