NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.04 seconds
      cpu time            0.01 seconds
      

1519  
1520  proc datasets lib=work nolist kill;
NOTE: Deleting WORK.DOMAIN_RESULTS (memtype=DATA).
NOTE: Deleting WORK.DRUG (memtype=DATA).
NOTE: Deleting WORK.FORMATS (memtype=CATALOG).
NOTE: Deleting WORK.FY (memtype=DATA).
NOTE: Deleting WORK.PERDRUG (memtype=DATA).
NOTE: Deleting WORK.PERDRUG2 (memtype=DATA).
NOTE: Deleting WORK.SASMACR (memtype=CATALOG).
NOTE: File WORK.SASMACR (memtype=CATALOG) cannot be deleted because it is in use.
1520!                                     quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      

1520!                                           /* delete  all files in the WORK library */
1521  LIBNAME CDATA 'C:\DATA';
NOTE: Libref CDATA refers to the same physical library as MYFOLDER.
NOTE: Libref CDATA was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: C:\Data
1522  
1523  TITLE1 '2019 AHRQ MEPS DATA USERS WORKSHOP (EXERCISE2.SAS)';
1524  TITLE2 "Narcotic analgesics or Narcotic analgesic combos, 2017";
1525  
1526  PROC FORMAT;
1527    VALUE GTZERO
1528       0         = '0'
1529       0 <- HIGH = '>0'
1530       ;
NOTE: Format GTZERO has been output.
1531  RUN;

NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.05 seconds
      cpu time            0.00 seconds
      

1532  
1533  /*1) IDENTIFY Narcotic analgesics or Narcotic analgesic combos USING THERAPEUTIC CLASSIFICATION (TC) CODES*/
1534  
1535  DATA DRUG;
1536    SET CDATA.H197A;
1537    IF TC1S1_1 IN (60, 191) ; /*definition of Narcotic analgesics or Narcotic analgesic combos*/
1538  RUN;

NOTE: There were 310487 observations read from the data set CDATA.H197A.
NOTE: The data set WORK.DRUG has 11915 observations and 63 variables.
NOTE: DATA statement used (Total process time):
      real time           0.68 seconds
      cpu time            0.07 seconds
      

1539  
1540  TITLE3 "A SAMPLE DUMP FOR PMED RECORDS WITH Narcotic analgesics or Narcotic analgesic combos";
1541  PROC PRINT DATA=DRUG (OBS=30);
1542  VAR RXRECIDX LINKIDX TC1S1_1 RXXP17X RXSF17X;
1543   BY DUPERSID;
1544  RUN;

NOTE: There were 30 observations read from the data set WORK.DRUG.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1545  
1546  
1547  /*2) SUM DATA TO PERSON-LEVEL*/
1548  
1549  PROC SUMMARY DATA=DRUG NWAY;
1550    CLASS DUPERSID;
1551    VAR RXXP17X RXSF17X;
1552    OUTPUT OUT=WORK.PERDRUG (DROP=_TYPE_) sum=TOT OOP;
1553  RUN;

NOTE: There were 11915 observations read from the data set WORK.DRUG.
NOTE: The data set WORK.PERDRUG has 2833 observations and 4 variables.
NOTE: PROCEDURE SUMMARY used (Total process time):
      real time           0.06 seconds
      cpu time            0.01 seconds
      

1554  
1555  TITLE3 "A SAMPLE DUMP FOR PERSON-LEVEL EXPENDITURES FOR Narcotic analgesics or Narcotic analgesic combos";
1556  PROC PRINT DATA=PERDRUG (OBS=30);
1557  RUN;

NOTE: There were 30 observations read from the data set WORK.PERDRUG.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1558  
1559  DATA WORK.PERDRUG2;
1560   SET PERDRUG;
1561       RENAME _FREQ_ = N_PHRCHASE ;
1562       THIRD_PAYER   = TOT - OOP;
1563  RUN;

NOTE: There were 2833 observations read from the data set WORK.PERDRUG.
NOTE: The data set WORK.PERDRUG2 has 2833 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

1564  
1565  /*3) MERGE THE PERSON-LEVEL EXPENDITURES TO THE FY PUF*/
1566  
1567  DATA  WORK.FY;
1568  MERGE CDATA.H201 (IN=AA KEEP=DUPERSID VARSTR VARPSU PERWT17F)
1569        WORK.PERDRUG2  (IN=BB KEEP=DUPERSID N_PHRCHASE TOT OOP THIRD_PAYER);
1570     BY DUPERSID;
1571  
1572        IF AA AND BB THEN DO;
1573           SUB      = 1 ;
1574        END;
1575  
1576        ELSE IF NOT BB THEN DO;   /*FOR PERSONS WITHOUT ANY PURCHASE OF Narcotic analgesics or Narcotic analgesic combos*/
1577           SUB         = 2 ;
1578           N_PHRCHASE  = 0 ;
1579           THIRD_PAYER = 0 ;
1580           TOT         = 0 ;
1581           OOP         = 0 ;
1582        END;
1583  
1584        IF AA;
1585  
1586        LABEL
1587              THIRD_PAYER = 'TOTAL-OOP'
1588              N_PHRCHASE  = '# OF PURCHASES PER PERSON'
1589              SUB         = 'POPULATION FLAG FOR PERSONS WITH 1+ Narcotic analgesics or Narcotic analgesic combos'
1590                          ;
1591  RUN;

NOTE: There were 31880 observations read from the data set CDATA.H201.
NOTE: There were 2833 observations read from the data set WORK.PERDRUG2.
NOTE: The data set WORK.FY has 31880 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.68 seconds
      cpu time            0.04 seconds
      

1592  
1593  TITLE3 "SUPPORTING CROSSTABS FOR NEW VARIABLES";
1594  PROC FREQ DATA=WORK.FY;
1595    TABLES  SUB * N_PHRCHASE * TOT * OOP * THIRD_PAYER / LIST MISSING ;
1596    FORMAT N_PHRCHASE TOT OOP THIRD_PAYER gtzero. ;
1597  RUN;

NOTE: There were 31880 observations read from the data set WORK.FY.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.15 seconds
      cpu time            0.00 seconds
      

1598  
1599  
1600  /*4) CALCULATE ESTIMATES ON USE AND EXPENDITURES*/
1601  
1602  ODS SELECT SUMMARY DOMAIN;
1603  TITLE3 "PERSON-LEVEL ESTIMATES ON EXPENDITURES AND USE FOR Narcotic analgesics or Narcotic analgesic combos, 2017";
1604  PROC SURVEYMEANS DATA=WORK.FY NOBS SUMWGT SUM STD MEAN STDERR;
1605    STRATA  VARSTR ;
1606    CLUSTER VARPSU;
1607    WEIGHT  PERWT17F;
1608     VAR TOT N_PHRCHASE  OOP THIRD_PAYER ;
1609     DOMAIN  SUB('1');
1610    ODS OUTPUT DOMAIN=work.domain_results;
1611  RUN;

NOTE: Due to nonpositive weights, 1164 observation(s) were deleted.
NOTE: Only one cluster in a stratum for POPULATION FLAG FOR PERSONS WITH 1+ Narcotic analgesics or Narcotic analgesic combos 
      domains for variable(s) TOT, N_PHRCHASE, OOP, THIRD_PAYER. The estimate of variance for TOT, N_PHRCHASE, OOP, THIRD_PAYER 
      will omit this stratum.
NOTE: The data set WORK.DOMAIN_RESULTS has 4 observations and 10 variables.
NOTE: PROCEDURE SURVEYMEANS used (Total process time):
      real time           0.14 seconds
      cpu time            0.11 seconds
      

1612  
1613  ODS LISTING;
1614  TITLE4 "SUBSET THE ESTIMATES FOR PERSONS ONLY WITH 1+ Narcotic analgesics or Narcotic analgesic combos";
1615  proc print data= work.domain_results noobs split='*';
1616   var   VARLABEL N  SumWgt  mean StdErr  Sum stddev;
1617   label SumWgt = 'Population*Size'
1618         mean = 'Mean'
1619         StdErr = 'SE of Mean'
1620         Sum = 'Total'
1621         Stddev = 'SE of*Total';
1622         format N SumWgt Comma12. mean stderr comma9.
1623                sum Stddev comma19.;
1624  run;

NOTE: There were 4 observations read from the data set WORK.DOMAIN_RESULTS.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

1625  ODS LISTING ;
1626  /* THE PROC PRINTTO null step is required to close the PROC PRINTTO */
1627  PROC PRINTTO;
1628  RUN;

